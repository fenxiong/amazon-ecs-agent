{
  "family": "ecsftest-logrouter-fluentd",
  "networkMode": "bridge",
  "containerDefinitions": [
    {
      "name": "logrouter",
      "image": "fluentd:v1.4-2",
      "essential": true,
      "memory": 256,
      "logRouter": {
        "type": "fluentd",
        "enableECSLogMetadata": true
      },
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group":"ecs-functional-tests",
          "awslogs-region":"us-west-2",
          "awslogs-stream-prefix":"logrouter-fluentd",
          "awslogs-multiline-pattern":"^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}"
        }
      }
    },
    {
      "name": "logsender",
      "image": "amazonlinux:2",
      "essential": true,
      "memory": 256,
      "command": ["sh", "-c", "echo pass; echo filtered"],
      "dependsOn": [
        {
          "containerName": "logrouter",
          "condition": "START"
        }
      ],
      "logConfiguration": {
        "logDriver": "awsrouter",
        "options": {
          "@type": "stdout",
          "exclude-pattern": "filtered",
          "include-pattern": "pass"
        }
      }
    }
  ]
}